<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Buzo Oversize Marrón</title>
        
        <!--Logo pestaña-->
        <link rel="icon" href="imgs/icono.jpeg" type="image/x-icon">

        <!--Google font-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
        <!--Bootstrap Css-->
        <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
        crossorigin="anonymous"
        />
        <!--Css carrousel-->
          <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
          integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
          crossorigin="anonymous"
          referrerpolicy="no-referrer"
        />

        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"
          integrity="sha512-sMXtMNL1zRzolHYKEujM2AqCLUR9F2C4/05cdbxjjLSRvMQIciEPCQZo++nk7go3BtSuK9kfa/s+a4f4i5pLkw=="
          crossorigin="anonymous"
          referrerpolicy="no-referrer"
        />
        <!-- Bootstrap Icons-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

        <!--Css-->
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>

        <div class="top-banner">
            <span class="top-banner-text"> 12 cuotas sin interés | Envío gratis a partir de 80.000$ | </span>
            <span class="top-banner-text"> 12 cuotas sin interés | Envío gratis a partir de 80.000$ | </span>
            <span class="top-banner-text"> 12 cuotas sin interés | Envío gratis a partir de 80.000$ | </span>
            <span class="top-banner-text"> 12 cuotas sin interés | Envío gratis a partir de 80.000$ | </span>
          </div>
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
              <a class="navbar-brand" href="index.html">
                <img src="imgs/logo_goat.png" alt="" width="45" height="40">
              </a>
              <a href="index.html">
                <h1 class="text-center">Goated</h1>
              </a>
              <div class="d-flex justify-content-end">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
                <a href="cart.html" class="carritoimg d-lg-none position-relative">
                  <i class="bi bi-cart fs-4"></i>
                  <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cart-badge-mobile">0</span>
                </a>
              </div>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav w-100 justify-content-center">
                  <li class="nav-item">
                    <a class="nav-link" href="aboutsUs.html">Sobre Nosotros</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="productos.html">Productos</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="suscribite.html">Suscribite</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="contactanos.html">Contactanos</a>
                  </li>
                </ul>
                <form class="d-flex" id="search-form" action="productos.html" method="GET">
                  <input type="text" id="search-input" name="search" placeholder="Buscar">
                  <button class="btn" type="submit" id="search-btn"><i class="bi bi-search fs-5"></i></button>
                </form>
                <a href="cart.html" class="carritoimg d-none d-lg-block position-relative">
                  <i class="bi bi-cart fs-4"></i>
                  <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cart-badge-desktop">0</span>
                </a>
              </div>
            </div>
          </nav>
    <div class="container carritocompras">
        <h1>Carrito de Compras</h1>
        <div class="row">
            <div class="col-md-8">
                <div id="cart-container">
                    <div id="listaCarrito"></div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Resumen del pedido</h5>
                        <p class="card-text">Cantidad de items: <span id="cantidad">0</span></p>
                        <p class="card-text">Total: $<span id="total">0</span></p>
                        <a id="btnComprar" href="#" class="btn btn-success w-100" target="_blank">
                            <i class="bi bi-whatsapp"></i> Comprar por WhatsApp
                        </a>
                        <button class="btn btn-danger w-100 mt-2" onclick="vaciarCarrito()">Vaciar carrito</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

      <script>
        let carrito = [];
        let total = 0;

        // Cargar carrito desde localStorage al inicio
        document.addEventListener('DOMContentLoaded', function () {
            cargarCarritoDesdeLocalStorage();
            actualizarCarrito();
        });

        function cargarCarritoDesdeLocalStorage() {
            const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
            carrito = [];
            total = 0;
            
            cartItems.forEach((item, index) => {
                const talleMayus = item.size ? item.size.charAt(0).toUpperCase() + item.size.slice(1) : 'S';
                const nombreBase = item.name;
                const nombre = `${item.name} - Talle: ${talleMayus} - Cant: ${item.quantity}`;
                const precioUnitario = item.price / item.quantity; // Precio por unidad
                const precio = item.price; // Precio total
                const cantidad = item.quantity;
                const imagen = item.image || '../imgs/logo_goat.png'; // Imagen por defecto si no existe
                
                carrito.push({ 
                    nombre, 
                    nombreBase,
                    precio, 
                    precioUnitario,
                    cantidad,
                    talle: talleMayus,
                    imagen,
                    index: index 
                });
                total += precio;
            });
        }

        function actualizarCarrito() {
            let lista = document.getElementById("listaCarrito");
            
            if (carrito.length === 0) {
                lista.innerHTML = '<div class="alert alert-info">No hay productos en el carrito.</div>';
                document.getElementById("cantidad").innerText = 0;
                document.getElementById("total").innerText = 0;
                document.getElementById("btnComprar").style.display = 'none';
                return;
            }
            
            lista.innerHTML = "";
            let cartHTML = '<div class="list-group">';
            
            carrito.forEach((item, index) => {
                cartHTML += `
                    <div class="list-group-item">
                        <div class="row align-items-center">
                            <div class="col-md-2">
                                <img src="${item.imagen}" alt="${item.nombre}" class="img-fluid rounded" style="max-height: 80px; object-fit: cover;">
                            </div>
                            <div class="col-md-5">
                                <h6 class="mb-1">${item.nombreBase}</h6>
                                <small class="text-muted">Talle: ${item.talle}</small>
                            </div>
                            <div class="col-md-2">
                                <div class="input-group input-group-sm">
                                    <button class="btn btn-outline-secondary" type="button" onclick="cambiarCantidad(${index}, -1)">-</button>
                                    <input type="number" class="form-control text-center" value="${item.cantidad}" min="1" max="10" onchange="actualizarCantidad(${index}, this.value)" style="max-width: 60px;">
                                    <button class="btn btn-outline-secondary" type="button" onclick="cambiarCantidad(${index}, 1)">+</button>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <strong class="text-success">$${item.precio.toLocaleString()}</strong>
                            </div>
                            <div class="col-md-1">
                                <button class="btn btn-outline-danger btn-sm" onclick="eliminarItem(${index})" title="Eliminar producto">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            cartHTML += '</div>';
            lista.innerHTML = cartHTML;
            
            // Calcular cantidad total de items (sumando las cantidades individuales)
            const cantidadTotal = carrito.reduce((acc, item) => acc + item.cantidad, 0);
            document.getElementById("cantidad").innerText = cantidadTotal;
            document.getElementById("total").innerText = total.toLocaleString();
            document.getElementById("btnComprar").style.display = 'block';
            
            // Actualizar contador global
            actualizarContadorGlobal();
            
            // Armar mensaje de WhatsApp
            let mensaje = "¡Hola! Quiero comprar los siguientes productos:\n\n";
            carrito.forEach(item => {
                mensaje += `• ${item.nombreBase} (Talle: ${item.talle}) x${item.cantidad} - $${item.precio.toLocaleString()}\n`;
            });
            mensaje += `\n💰 Total: $${total.toLocaleString()}\n\n¡Gracias!`;
            
            // Reemplaza este número con tu número de WhatsApp (ejemplo: +5491123456789)
            const numeroWhatsApp = "+5491158980778";
            document.getElementById("btnComprar").href = 
                `https://wa.me/${numeroWhatsApp.replace('+', '')}?text=${encodeURIComponent(mensaje)}`;
        }

        function eliminarItem(index) {
            // Eliminar del array carrito
            carrito.splice(index, 1);
            total = carrito.reduce((acc, item) => acc + item.precio, 0);
            
            // Actualizar localStorage
            const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
            cartItems.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cartItems));
            
            // Mostrar toast
            const toastEl = document.getElementById('liveToast');
            const toast = new bootstrap.Toast(toastEl);
            toast.show();
            
            // Actualizar vista
            actualizarCarrito();
        }

        function vaciarCarrito() {
            carrito = [];
            total = 0;
            localStorage.removeItem('cart');
            
            // Mostrar toast
            const toastEl = document.getElementById('liveToastEmptyCart');
            const toast = new bootstrap.Toast(toastEl);
            toast.show();
            
            // Actualizar vista
            actualizarCarrito();
        }

        // Función para cambiar cantidad con botones + y -
        function cambiarCantidad(index, cambio) {
            const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
            const nuevaCantidad = cartItems[index].quantity + cambio;
            
            if (nuevaCantidad > 0 && nuevaCantidad <= 10) {
                actualizarCantidad(index, nuevaCantidad);
            }
        }

        // Función para actualizar cantidad directamente
        function actualizarCantidad(index, nuevaCantidad) {
            nuevaCantidad = parseInt(nuevaCantidad);
            if (nuevaCantidad < 1) nuevaCantidad = 1;
            if (nuevaCantidad > 10) nuevaCantidad = 10;

            // Actualizar localStorage
            const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
            const precioUnitario = cartItems[index].price / cartItems[index].quantity;
            cartItems[index].quantity = nuevaCantidad;
            cartItems[index].price = precioUnitario * nuevaCantidad;
            localStorage.setItem('cart', JSON.stringify(cartItems));

            // Recargar carrito
            cargarCarritoDesdeLocalStorage();
            actualizarCarrito();
        }

        // Función para actualizar contador global en todas las páginas
        function actualizarContadorGlobal() {
            const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
            const cantidadTotal = cartItems.reduce((acc, item) => acc + item.quantity, 0);
            
            // Actualizar badges del carrito
            const badgeMobile = document.getElementById('cart-badge-mobile');
            const badgeDesktop = document.getElementById('cart-badge-desktop');
            
            if (badgeMobile) {
                badgeMobile.textContent = cantidadTotal;
                badgeMobile.style.display = cantidadTotal > 0 ? 'inline-block' : 'none';
            }
            
            if (badgeDesktop) {
                badgeDesktop.textContent = cantidadTotal;
                badgeDesktop.style.display = cantidadTotal > 0 ? 'inline-block' : 'none';
            }

            // Disparar evento personalizado para otras páginas
            window.dispatchEvent(new CustomEvent('carritoActualizado', { 
                detail: { cantidad: cantidadTotal } 
            }));
        }

        // Mantener compatibilidad con código existente
        function removeItem(index) {
            eliminarItem(index);
        }

        function emptyCart() {
            vaciarCarrito();
        }

        // Actualizar badges del carrito en la navbar (función legacy)
        function actualizarBadgesCarrito() {
            actualizarContadorGlobal();
        }

        // Llamar la función al cargar la página
        document.addEventListener('DOMContentLoaded', function () {
            actualizarContadorGlobal();
        });
    </script>
    <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"
    ></script>
    <script src="../cart.js"></script>

      <!-- Carousel Sponsors -->
    <h1>Sponsors</h1>
    <div class="owl-carousel owl-theme d-flex " id="container-sponsors">
        <div class="item">
          <a href="https://www.fedex.com/es-ar/home.html" target="_blank"><img class="img-fluid w-100 h-100" src="imgs/fedex.jpg" alt=""></a>
        </div>
        <div class="item">
          <a href="https://www.globant.com/es" target="_blank"><img class="img-fluid w-100 h-100" src="imgs/globant.jpg" alt=""></a>
        </div>
        <div class="item">
          <a href="https://www.uade.edu.ar/" target="_blank"><img class="img-fluid w-100 h-100" src="imgs/uade.png" alt=""></a>
        </div>
        <div class="item">
          <a href="https://www.starbucks.com.ar/" target="_blank"><img class="img-fluid w-100 h-100" src="imgs/starbuks.jpg" alt=""></a>
        </div>
        <div class="item item-messi">
          <a href="https://www.themessistore.com/" target="_blank"><img class="img-fluid w-100 h-100" src="imgs/messi.png" alt=""></a>
        </div>
    </div>
     <!--Footer-->
    <footer class="bg-light text-center text-lg-start">   
      <div class="container p-1" id="footer-div">
        <div class="row">
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <a class="navbar-brand d-flex align-items-center justify-content-center justify-content-lg-start" href="index.html">
                    <img src="imgs/logo_goat.png" alt="" width="45" height="40" class="me-2">
                    <h1>Goated</h1>
            </a>
              <p class="location ">
                  Ubicación: Lima 757, CABA, Argentina
              </p>
              <a href="https://www.instagram.com/" target="_blank" class="text-decoration-none text-dark"><i class="bi bi-instagram"></i></a>   
              <a href="https://x.com/" class="text-decoration-none text-dark" target="_blank"><i class="bi bi-twitter-x"></i></a> 
              <a href="https://www.linkedin.com/" class="text-decoration-none text-dark" target="_blank"><i class="bi bi-linkedin"></i></a>
          </div>
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5 class="text">Ayuda</h5>
            <ul class="list-unstyled">
              <li>
                <a href="#!" class="text-dark">Lucas Castro</a>
              </li>
              <li>
                <a href="#!" class="text-dark">Diego Morate Leiva</a>
              </li>
              <li>
                <a href="#!" class="text-dark">Bruno Cacciola</a>
              </li>
              <li>
                <a href="#!" class="text-dark">Alejandro Garrido</a>
              </li>
              <li>
                <a href="#!" class="text-dark">Mateo Carboni</a>
              </li>
            </ul>
          </div>
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5 class="text">Acerca de</h5>
            <ul class="list-unstyled">
              <li>
                <a href="#!" class="text-dark">Diseño y Desarrollo Web</a>
              </li>
              <li>
                <a href="#!" class="text-dark">2do Cuatrimestre</a>
              </li>
              <li>
                <a href="#!" class="text-dark">2024</a>
              </li>
              <li>
                <a href="#!" class="text-dark">UADE</a>
              </li>
            </ul>
          </div>
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5 class="text">Novedades Goat</h5>
            <ul class="list-unstyled">
              <li>
                <a href="#!" class="text-dark">ENVÍO GRATIS EN TU PRIMERA COMPRA </a>
              </li>
              <li>
                <a href="#!" class="text-dark">COLECCIÓN VERANO 2024</a>
              </li>
              <li>
                <a href="#!" class="text-dark">NUEVO LOCAL EN LIMA 757, CABA</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-banner text-center p-1">
        <a class="copy">© 2024 Goated Inc Copyright</a><p class="d-inline copy-bar"> | </p>
        <a class="copy">Política de privacidad</a><p class="d-inline copy-bar"> | </p>
        <a class="copy">Términos y condiciones </a>
      </div>
    </footer>
  
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"
      ></script>
  
      <script
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
      ></script>
  
      <script
        src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"
        integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
      ></script>
  
     <script>
          $(document).ready(function(){
              $('.owl-carousel').owlCarousel({
                  loop: true,
                  nav: false,
                  autoplay: true,
                  autoplayTimeout: 4000,
                  dots:false,
                  responsive: {
                    0: {
                      items: 1
                    },
                    768: {
                      items: 3
                    },
                    1200: {
                      items: 5
                    }
                  }
              })
          });
     </script>
      <!--Alerta producto eliminado-->
      <div class="toast-container position-fixed top-50 end-0 p-3">
        <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="toast-header">
            <i class="bi bi-trash me-3"></i>
            <strong class="me-auto">Goated</strong>
            <small>Ahora</small>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
          <div class="toast-body">
            Producto eliminado del carrito con éxito.
          </div>
        </div>
      </div>
      <!--Alerta carrito vaciado-->
      <div class="toast-container position-fixed top-50 end-0 p-3">
        <div id="liveToastEmptyCart" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="toast-header">
            <i class="bi bi-bag me-3"></i>
            <strong class="me-auto">Goated</strong>
            <small>Ahora</small>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
          <div class="toast-body">
            Carrito vaciado con éxito.
          </div>
        </div>
      </div>

      <!-- Modal Finalizar Compra -->
      <div class="modal fade" id="finalizarCompraModal" tabindex="-1" aria-labelledby="finalizarCompraLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="finalizarCompraLabel">Formulario de Pago</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="formPago" class="needs-validation" novalidate>
                        <div class="row g-3">
                            <!-- Nombre -->
                            <div class="col-md-6">
                                <label for="nombre" class="form-label">Nombre</label>
                                <input type="text" class="form-control" id="nombre" pattern="[A-Za-z\s]+" required>
                                <div class="invalid-feedback">
                                    Por favor, ingresa tu nombre.
                                </div>
                            </div>
                            <!-- Apellido -->
                            <div class="col-md-6">
                                <label for="apellido" class="form-label">Apellido</label>
                                <input type="text" class="form-control" id="apellido" pattern="[A-Za-z\s]+" required>
                                <div class="invalid-feedback">
                                    Por favor, ingresa tu apellido.
                                </div>
                            </div>
                            <!-- Email -->
                            <div class="col-md-12">
                                <label for="email" class="form-label">Correo Electrónico</label>
                                <input type="email" class="form-control" id="email" required>
                                <div class="invalid-feedback">
                                    Ingresa un correo electrónico válido.
                                </div>
                            </div>
                            <!-- Número de tarjeta -->
                            <div class="col-md-12">
                                <label for="numeroTarjeta" class="form-label">Número de Tarjeta</label>
                                <input type="text" class="form-control" id="numeroTarjeta" pattern="\d{16}" required>
                                <div class="invalid-feedback">
                                    Ingresa un número de tarjeta válido (16 dígitos).
                                </div>
                            </div>
                            <!-- Vencimiento -->
                            <div class="col-md-6">
                                <label for="vencimiento" class="form-label">Fecha de Vencimiento</label>
                                <input type="month" class="form-control" id="vencimiento" required>
                                <div class="invalid-feedback">
                                    Ingresa una fecha de vencimiento válida.
                                </div>
                            </div>
                            <!-- Código de Seguridad -->
                            <div class="col-md-6">
                                <label for="codigoSeguridad" class="form-label">Código de Seguridad</label>
                                <input type="text" class="form-control" id="codigoSeguridad" maxlength="3" required>
                                <div class="invalid-feedback">
                                    Ingresa un código de 3 dígitos.
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button class="btn btn-primary w-100" type="submit">Pagar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
      </div>
      <!-- Modal de Agradecimiento -->
      <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content text-center p-4">
            <div class="modal-body">
              <img src="imgs/compraCheck.png" alt="Check Icon" style="width: 80px;" class="mb-3">
              <h4 class="fw-bold">Compra realizada con exito</h4>
              <p>Tu compra ha sido aceptada, gracias por confiar cabrita</p>
              <button type="button" class="form-btn mt-3" id="successModalOkButton" data-bs-dismiss="modal">OK</button>
            </div>
          </div>
        </div>
      </div>
      <script>
        // Validación del formulario
      (function () {
          'use strict';
          const forms = document.querySelectorAll('.needs-validation');
          forms.forEach(form => {
              form.addEventListener('submit', event => {
                  if (!form.checkValidity()) {
                      event.preventDefault();
                      event.stopPropagation();
                  } else {
                      event.preventDefault(); // Prevent default form submission
                      const finalizarCompraModal = bootstrap.Modal.getInstance(document.getElementById('finalizarCompraModal'));
                      finalizarCompraModal.hide(); // Close the purchase modal

                      finalizarCompraModal._element.addEventListener('hidden.bs.modal', () => {
                          const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                          successModal.show(); // Show the success modal
                      }, { once: true });
                  }
                  form.classList.add('was-validated');
              }, false);
          });
      })();
      // Evento para el botón "OK" del modal de agradecimiento y si clickeo afuera del modal
    window.addEventListener('DOMContentLoaded', () => {
        const successModal = new bootstrap.Modal(document.getElementById('successModal'));
        successModal._element.addEventListener('hidden.bs.modal', () => {
            localStorage.removeItem('cart');
            location.reload();
        }, { once: true });
    });
    document.getElementById('successModalOkButton').addEventListener('click', () => {
        localStorage.removeItem('cart');
        location.reload();
    });
    </script>
</body>
</html>
